# WebClass To-Do 抽出ツール

**WebClass の課題一覧 CSV から、To-Do タスクを抽出して整形・エクスポートできる Web アプリです。**  
モバイル対応・インストール不要・サクサク動作。



---

## 🔧 主な機能

- 📂 CSV アップロード（WebClass 課題一覧）
- 🔍 条件抽出（締切・状態・キーワード）
- 📅 エクスポート形式
  - iCalendar (.ics)
  - Todoist インポートCSV
  - PNG（縦／表形式）
- 📲 iPhone リマインダーへ一括送信（iOS ショートカット連携）
- 📱 iPhone Safari でも動作確認済み
- ☁️ [Cloudflare Pages でホスティング中](https://webclass-todo.pages.dev)

---

## 📲 iPhone リマインダー連携の使い方

### 1. iOS ショートカットを準備する

1. iPhone / iPad の **ショートカット** アプリで新規ショートカットを作成し、名前を **`WebClass Reminders`** にします。
2. 以下のアクションをこの順番で追加します。
   1. **「辞書を取得」**（英語環境では *Get Dictionary from Input*）で、受け取ったテキストを JSON として辞書に変換。
   2. **「辞書の値を取得」**（*Get Dictionary Value*）でキー `tasks` を指定し、配列を取り出します。
   3. **「各項目を繰り返す」**（*Repeat with Each*）を挿入し、取り出した配列を繰り返します。
   4. 繰り返しブロック内で次のアクションを配置します。
      - **「辞書の値を取得」**でキー `title` → リマインダーのタイトル用。
      - **「辞書の値を取得」**でキー `note` → メモ用。
      - **「辞書の値を取得」**でキー `dueDate` → 日付文字列用。
      - **「日付を取得」**（*Get Date from Input*）で `dueDate` を日時に変換。
      - **「リマインダーを追加」**（*Add New Reminder*）でタイトル・メモ・期日を設定します。必要に応じて追加先リストやアラームも指定できます。
3. 保存して完了です。ショートカット名を変更したい場合は、`src/App.jsx` 内の `REMINDER_SHORTCUT_NAME` を同じ名前に書き換えてください。

### 2. アプリから渡されるデータ形式

リマインダー送信時、アプリはショートカットへ次の JSON をテキストとして渡します。

```json
{
  "tasks": [
    {
      "title": "教材名 (コース名)",
      "note": "状態: ...",
      "dueDate": "2025-07-19T12:00:00+09:00"
    }
  ]
}
```

- `title` … リマインダーのタイトル。
- `note` … 状態などのメモ（未設定の場合は `状態: 未設定`）。
- `dueDate` … JST の ISO 8601 形式（ショートカット側で日付に変換してください）。

### 3. Web アプリから送信する手順

1. CSV を読み込み、通常通りフィルタリングします。
2. 「📲 iPhoneリマインダーに一括追加」ボタンを押すとポップアップが開きます。
3. 並び順や対象の状態を確認します。初期状態では `合格`・`実施`・`完了`・`済` を含む状態が除外されています。
4. 「ショートカットを起動」を押すと `shortcuts://` URL 経由でショートカットが呼び出され、プレビューに表示されている課題がまとめてリマインダーに登録されます。

> ⚠️ 連携は iOS / iPadOS の Safari でのみ動作します。デスクトップ環境や他ブラウザではショートカットが起動しません。

---

## ⌨️ キーボードショートカット

| 操作                        | ショートカット                     |
|-----------------------------|------------------------------------|
| ファイルを開く              | `Ctrl/Cmd + O`                     |
| CSV エクスポート            | `Ctrl/Cmd + Shift + C`             |
| iCalendar エクスポート      | `Ctrl/Cmd + Shift + I`             |
| Todoist CSV エクスポート    | `Ctrl/Cmd + Shift + T`             |
| PNG（テーブル）エクスポート | `Ctrl/Cmd + Shift + P`             |
| PNG（縦リスト）エクスポート | `Ctrl/Cmd + Shift + L`             |
| ヘルプ表示                  | `Ctrl/Cmd + H`                     |
| プレビューを閉じる          | `Esc`                              |
| プレビューでダウンロード           | `Enter` (プレビュー表示中) |
| フィルタリセット           | `Ctrl/Cmd + Shift + R` |

---

## 📦 技術スタック

| 技術       | 用途               |
|------------|--------------------|
| [Vite](https://vitejs.dev/)       | フロントエンドビルド         |
| React      | UI コンポーネント         |
| Luxon      | 日付操作（タイムゾーン対応） |
| PapaParse  | CSVパース           |
| html2canvas| PNG 画像化         |
| ics        | iCalendar 生成      |

---

## 🚀 開発・ビルド手順

```bash
# 依存パッケージのインストール
npm install

# 開発サーバー起動（http://localhost:5173）
npm run dev

# ビルド（dist フォルダ生成）
npm run build
```
